(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,n,t){"use strict";t.r(n);var c,r,a,o,i,s,d,l,b,j,u,p,O,h,x,g,f,m,y,v,w,k,S,N,U,z=t(2),E=t(79),$=t.n(E),A=t(108),B=t(90),F=t(12),P=t(11),C={colors:{primaryText:"#232323",mainBackground:"#F2F2F2"},fonts:{primary:{family:"Source Sans Pro, sans-serif",weight:400}}},I=t(82),H=t(91),L=t(92),K=t(81),T=t(18),R=new L.a({uri:"https://ants-on-a-picnic-backend.herokuapp.com/",credentials:"include"}),q=new T.a((function(e,n){var t=localStorage.getItem("token");return t&&e.setContext({headers:{authorization:t}}),n(e)})),D=Object(K.a)((function(){})),J=new I.a({cache:new H.a,link:T.a.from([D,q,R])}),M=t(5),Q=function(){return Object(M.jsx)("div",{children:Object(M.jsx)("h1",{children:"Welcome to Harvard Puzzle Hunt twice!"})})},W=t(39),Z=t(9),_=P.b.div(c||(c=Object(Z.a)(["\n  display: flex;\n  justify-content: center;\n  width: 100vw;\n  height: 100vh;\n  margin: 0;\n  background-color: palegoldenrod;\n"]))),G=P.b.div(r||(r=Object(Z.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  padding: 10px;\n  /* border: rgba(40,40,40,0.5) 4px; */\n  /* border-style: solid; */\n  text-align: center;\n  font-family: Arial, Helvetica, sans-serif;\n  position: fixed;\n  top: 2vh;\n  /* background-color: rgba(108,128,150,0.8); */\n  /* animation: color-change 40s infinite;\n  position: center;\n  @keyframes color-change {\n    0% { background-color: rgba(100,128,150,0.8); }\n    20% { background-color: rgba(128,128,100,0.8); }\n    40% { background-color: rgba(100,128,128,0.8); }\n    60% { background-color: rgba(150,100,128,0.8); }\n    80% { background-color: rgba(128,150,100,0.8); }\n    100% { background-color: rgba(108,128,150,0.8); }\n  } */\n"]))),V=P.b.td(a||(a=Object(Z.a)(["\n  padding: 20px;\n  border: solid;\n  border-color: palegoldenrod;\n  border-width: 5px;\n"]))),X=Object(P.b)(V)(o||(o=Object(Z.a)(["\n  width: 52px;\n"]))),Y=Object(P.b)(V)(i||(i=Object(Z.a)(["\n  width: 185px;\n"]))),ee=Object(P.b)(V)(s||(s=Object(Z.a)(["\n  width: 140px;\n"]))),ne=Object(P.b)(V)(d||(d=Object(Z.a)(["\n  width: 200px;\n"]))),te=P.b.table(l||(l=Object(Z.a)(["\n  border-collapse: collapse;\n  /* margin: 10px; */\n"]))),ce=P.b.tbody(b||(b=Object(Z.a)(["\n  background-color: rgb(10,150,10);\n"]))),re=P.b.thead(j||(j=Object(Z.a)(["\n  font-weight: bold;\n  font-size: 18px;\n  background-color: rgb(10,120,10);\n"]))),ae=P.b.h1(u||(u=Object(Z.a)(["\n  font-weight: bold;\n  font-size: 45px;\n"]))),oe=function(e){var n,t=e.index,c=e.displayName,r=e.score,a=e.updatedAt;return Object(M.jsxs)("tr",{children:[Object(M.jsx)(X,{children:"".concat(t+1)}),Object(M.jsx)(Y,{children:"".concat(c)}),Object(M.jsx)(ee,{children:"".concat(r)}),Object(M.jsx)(ne,{children:"".concat((n=a,new Date(parseInt(n)).toLocaleString("en-US",{timeZone:"EST"})+" EST"))})]})},ie=function(e){var n=e.index,t={index:n,displayName:e.displayName,score:e.score,updatedAt:e.updatedAt};return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(oe,Object(W.a)({},t))})},se=t(48),de=t.n(se),le=de()(p||(p=Object(Z.a)(["\n  query allUsers {\n    allUsers {\n      id\n      displayName\n      score\n      updatedAt\n    }\n  }\n"]))),be=de()(O||(O=Object(Z.a)(["\n  query userByName($name: String!, $password: String!) {\n    userByName(displayName: $name, password: $password) {\n      id\n      displayName\n      rank\n      score\n    }\n  }\n"]))),je=de()(h||(h=Object(Z.a)(["\n  mutation addUser($input: AddUser!) {\n    addUser(input: $input) {\n      id\n      displayName\n      rank\n      score\n    }\n  }\n"]))),ue=de()(x||(x=Object(Z.a)(["\n  mutation updateScore($id: ID!, $score: Int!) {\n    updateScore(id: $id, newScore: $score) {\n      id\n      displayName\n      score\n      rank\n    }\n  }\n"]))),pe=function(){var e=Object(A.useQuery)(le,{partialRefetch:!0,onError:function(e){},onCompleted:function(e){}}),n=e.data,t=e.error,c=e.loading;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(te,{children:[Object(M.jsx)(re,{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)(X,{children:"Rank"}),Object(M.jsx)(Y,{children:"Username"}),Object(M.jsx)(ee,{children:"Puzzles Solved"}),Object(M.jsx)(ne,{children:"Time of Last Solve"})]})}),Object(M.jsx)(ce,{children:c||t||n.allUsers.map((function(e){return e?Object(M.jsx)(ie,Object(W.a)({index:n.allUsers.indexOf(e)},e),e.id):""}))})]}),c&&Object(M.jsx)("p",{children:"Fetching data..."}),t&&Object(M.jsx)("p",{children:"Failed to fetch data, try refreshing the page."})]})},Oe=function(){return Object(z.useEffect)((function(){document.title="Leaderboard"}),[]),Object(M.jsx)(_,{children:Object(M.jsxs)(G,{children:[Object(M.jsx)(ae,{children:"Leaderboard"}),Object(M.jsx)(pe,{})]})})},he=P.b.div(g||(g=Object(Z.a)(["\n  display: flex;\n  justify-content: center;\n  width: 100vw;\n  height: 100vh;\n  margin: 0;\n  background-color: palegoldenrod;\n"]))),xe=P.b.input(f||(f=Object(Z.a)(["\n  padding: auto;\n  margin: auto;\n  width: 160px;\n"]))),ge=P.b.button(m||(m=Object(Z.a)(["\n  background: rgb(100,220,100);\n  border: black 1px;\n  border-style: solid;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-top: 10px;\n  width: 80px;\n  align-self: center;\n\n  &:hover {\n    color: white;\n    background-color: rgb(10,150,10);\n  }\n"]))),fe=P.b.div(y||(y=Object(Z.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  /* padding: -10px; */\n  width: 500px;\n  font-family: Arial, Helvetica, sans-serif;\n  position: fixed;\n  top: 3vh;\n"]))),me=P.b.div(v||(v=Object(Z.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  /* padding: -10px; */\n  margin: -5px;\n  /* text-align: center; */\n  font-family: Arial, Helvetica, sans-serif;\n"]))),ye=P.b.div(w||(w=Object(Z.a)(["\n  margin: auto;\n  align-items: right;\n  text-align: right;\n  /* border: solid black 2px; */\n  width: 225px;\n"]))),ve=P.b.div(k||(k=Object(Z.a)(["\n  margin: auto;\n  align-items: left;\n  text-align: left;\n  /* border: solid black 2px; */\n  width: 275px;\n"]))),we=P.b.div(S||(S=Object(Z.a)(["\n  text-align: center;\n  width: 500px;\n"]))),ke=P.b.p(N||(N=Object(Z.a)(["\n  color: red;\n  font-size: 15px;\n"]))),Se=P.b.p(U||(U=Object(Z.a)(["\n  color: black;\n  font-size: 15px;\n"]))),Ne=t(30),Ue=function(e){var n=e.label,t=e.state,c=e.setState,r=e.onKeyPress;return Object(M.jsxs)(me,{children:[Object(M.jsx)(ye,{children:Object(M.jsx)("p",{children:n})}),Object(M.jsx)(ve,{children:Object(M.jsx)(xe,{value:t,onChange:function(e){return c(e.target.value)},onKeyPress:r})})]})},ze=function(){var e=Object(z.useState)(""),n=Object(Ne.a)(e,2),t=n[0],c=n[1],r=Object(z.useState)(""),a=Object(Ne.a)(r,2),o=a[0],i=a[1],s=Object(z.useState)(!1),d=Object(Ne.a)(s,2),l=d[0],b=d[1],j=Object(z.useState)(!1),u=Object(Ne.a)(j,2),p=u[0],O=u[1],h=Object(z.useState)(!0),x=Object(Ne.a)(h,2),g=x[0],f=x[1],m=Object(z.useState)(!1),y=Object(Ne.a)(m,2),v=y[0],w=y[1],k=Object(z.useState)({}),S=Object(Ne.a)(k,2),N=S[0],U=S[1],E=Object(z.useState)(!1),$=Object(Ne.a)(E,2),B=$[0],F=$[1],P=Object(A.useLazyQuery)(be,{partialRefetch:!0,onError:function(e){console.log("getUser",e),w(!0)},onCompleted:function(e){b(!!e.userByName),e.userByName?(console.log("finished?",!L),console.log("exists?",l),console.log("found user:",e),O(!!e.userByName),e.userByName&&(console.log(e),U(e.userByName)),f(!1)):(console.log("finished?",!L),console.log("exists?",l),console.log("did not find user:",e),R({variables:{input:{displayName:t,password:o}}}))}}),C=Object(Ne.a)(P,2),I=C[0],H=C[1],L=(H.data,H.error,H.loading),K=Object(A.useMutation)(je,{onError:function(e){console.log("addUser",e),w(!0)},onCompleted:function(e){O(!!e.addUser),e.addUser&&(console.log(e),U(e.addUser)),f(!1)}}),T=Object(Ne.a)(K,2),R=T[0],q=T[1],D=(q.data,q.error,q.loading),J=Object(A.useMutation)(ue,{variables:{id:N?N.id:"",newScore:N?N.score:0},onError:function(e){w(!0)},onCompleted:function(e){}}),Q=Object(Ne.a)(J,2),W=(Q[0],Q[1]),Z=(W.data,W.error,W.loading,function(){console.log("here"),console.log("name:",t),console.log("password:",o),function(){var e=t.length;return!(e<3||e>30)&&" "!==t[0]&&" "!==t[e-1]&&/^[0-9a-zA-Z`~!@#$%^= +\[\]{}\\|;:'",<>./?&*_()-]*$/.test(t)}()?I({variables:{name:t,password:o}}):F(!0)}),_=function(e){console.log("here3"),"Enter"!==e.code&&"NumpadEnter"!==e.code||Z()};return Object(M.jsx)(M.Fragment,{children:p?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("p",{children:"Welcome".concat(l?" back,":","," ").concat(N.displayName,"!")}),Object(M.jsx)("p",{children:"Current puzzle: ".concat(N.score+1)})]}):Object(M.jsxs)(fe,{children:[Object(M.jsx)(Ue,{label:"Username (public)",state:t,setState:function(e){F(!1),c(e)},onKeyPress:_}),Object(M.jsx)(Ue,{label:"Password (optional)",state:o,setState:i,onKeyPress:_}),Object(M.jsx)(ge,{onClick:Z,children:"Sign In"}),Object(M.jsx)(we,{children:B?Object(M.jsx)(ke,{children:"Username must have 3-30 characters, no leading or trailing spaces, and use only characters and symbols on a standard keyboard."}):g||(v?Object(M.jsx)(ke,{children:"Error loading user, please refresh the page."}):L||D?Object(M.jsx)(Se,{children:"Signing in..."}):p||Object(M.jsx)(ke,{children:"Incorrect password"}))})]})})},Ee=function(){return Object(z.useEffect)((function(){document.title="Submit"}),[]),Object(M.jsx)(he,{children:Object(M.jsx)(ze,{})})},$e=function(){return Object(M.jsx)(B.a,{basename:"/ants",children:Object(M.jsx)(P.a,{theme:C,children:Object(M.jsx)(A.ApolloProvider,{client:J,children:Object(M.jsx)("div",{className:"App",children:Object(M.jsxs)(F.c,{children:[Object(M.jsx)(F.a,{path:"/submit",component:Ee}),Object(M.jsx)(F.a,{path:"/leaderboard",component:Oe}),Object(M.jsx)(F.a,{path:"/",component:Q})]})})})})})};$.a.render(Object(M.jsx)($e,{}),document.getElementById("root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.008d4646.chunk.js.map